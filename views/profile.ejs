<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <title>WorkHub User</title>
    <link rel="icon" type="image/x-icon" href="/images/icon.ico">
    <link rel="stylesheet" href="/styles.css">
    <style>
        h1{
            font-size: 2em;
        }
        main{
            margin: 20px 0;
        }
        .alignleft{
            text-align: left;
            justify-content: center;
            display: flex;
        }
        .profile{
            width: 30%;
        }
        .profile-container{
            height: 50vh;
            border-bottom: 1px solid black;
            width: 80%;
        }
        .flex{
            text-align: right;
            flex-direction: row !important;
        }
        #otherbar{
            height: 20vh;
            width: 20%;
            align-items: center;
            display: flex;
            justify-content: center;
        }
        #otherbar a{
            text-decoration: none;
            color: black;
            transition-duration: 0.2s;
            font-size: 2em;
            position: relative;
            overflow: hidden;
            display: inline-block;
            padding-bottom: 10px;
            font-weight: bold;
        }
        #otherbar div{
            align-items: center;
            text-align: center;
            display: flex;
            flex-direction: column;
        }
        .flex i{
            color: black;
            transition: color 0.2s ease;
            margin: 4px;
        }
        .flex:hover i:nth-child(1) { transition-delay: 0.1s; }
        .flex:hover i:nth-child(2) { transition-delay: 0.2s; }
        .flex:hover i:nth-child(3) { transition-delay: 0.3s; }
        .flex:hover i:nth-child(4) { transition-delay: 0.4s; }
        .flex:hover i:nth-child(5) { transition-delay: 0.5s; }

        .flex:hover i {
            color: rgb(255, 0, 0);
        }
    </style>
    <script>
        if (window.history.replaceState) {
            window.history.replaceState(null, null, window.location.href);
        }        
    </script>
</head>
<body>
    <%- include('navbar') %>
    <main>
        <section class="profile-container">
            <h1>PROFILE</h1>
            <div class="alignleft">
                <div class="profile">
                    <div class="flex">
                        <h3>Username : </h3>
                        <h3><%= user.username %></h3>
                    </div>
                    <div class="flex">
                        <h3>Email : </h3>
                        <h3><%= user.email %></h3>
                    </div>
                    <div class="flex">
                        <h3>Phone number : </h3>
                        <h3><%= user.phone %></h3>
                    </div>
                    <h1>Change Password</h1>
                    <form action="/change-password" method="POST">
                        <label for="oldPassword">Old Password:</label>
                        <input type="password" id="oldPassword" name="oldPassword" required><br>

                        <label for="newPassword">New Password:</label>
                        <input type="password" id="newPassword" name="newPassword" minlength="6" required><br>

                        <label for="confirmNewPassword">Confirm New Password:</label>
                        <input type="password" id="confirmNewPassword" name="confirmNewPassword" minlength="6" required><br>

                        <button type="submit">Update Password</button>
                    </form>
                </div>
            </div>
        </section>
        <section id="otherbar">
            <div>
                <a href="review">REVIEW</a>
                <div class="flex">
                    <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i>
                </div>
            </div>
        </section>
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                document.querySelectorAll('#otherbar a').forEach((link, index) => {
                    let newHTML = '';
                    for (let i = 0; i < link.textContent.length; i++) {
                        let delay = (i * 0.05) + 's';
                        newHTML += `<span style="transition-delay: ${delay};">${link.textContent[i]}</span>`;
                    }
                    link.innerHTML = newHTML;
                    link.style.overflow = 'hidden';
                });
            
                document.querySelectorAll('#otherbar a').forEach((link) => {
                    link.addEventListener('mouseover', () => {
                        link.querySelectorAll('span').forEach((span) => {
                            span.style.color = 'rgb(255, 0, 0)';
                        });
                    });
                    link.addEventListener('mouseout', () => {
                        link.querySelectorAll('span').forEach((span) => {
                            span.style.color = 'black';
                        });
                    });
                });
            });
        </script>
        <script>
            function togglePasswordVisibility() {
                const hashedPasswordElement = document.getElementById('hashedPassword');
                if (hashedPasswordElement.style.display === 'none') {
                    hashedPasswordElement.style.display = 'block';
                } else {
                    hashedPasswordElement.style.display = 'none';
                }
            }
        </script>
    </main>
    <footer>
        <div class="footer-container">
            <div class="footernav">
                <h1>Workhub</h1>
                <a href="/">Home</a>
                <a href="/workspaces">Workspaces</a>
                <a href="/book">Booking</a>
                <a href="/review">Review</a>
                <a href="/profile">Manage profile</a>
            </div>
            <div>
                <h1>CONTACT US</h1>
                <h4><i class="bi bi-whatsapp"></i> Whatsapp : 012-3456789</h4>
            </div>
        </div>
        <p>&copy; 2024 WorkHub. All rights reserved.</p>
        <button class="scrolltop" onclick="scrollToTop()" id="scroll-top-button"><i class="bi bi-arrow-up-square-fill"></i></button>
        <script>
            function scrollToTop() {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
            
            window.addEventListener('scroll', function() {
                var scrollTopButton = document.getElementById('scroll-top-button');
                if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                    scrollTopButton.style.display = "block";
                } else {
                    scrollTopButton.style.display = "none";
                }
            });
        </script>
    </footer>
</body>
</html>
